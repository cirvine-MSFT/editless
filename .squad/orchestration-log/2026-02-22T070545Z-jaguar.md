# Orchestration Log — Jaguar (Copilot SDK Expert)

**Timestamp:** 2026-02-22T070545Z  
**Sessions:** 2 research runs  
**Status:** Completed  

## Completed Research

### Session 1: ACP Deep Dive (Complete Protocol Analysis)
- **Duration:** ~3h  
- **Output:** 7-section definitive analysis document
- **Scope:** Protocol design, Copilot CLI behavior, integration options, stability assessment, EditLess recommendations

### Key Findings

1. **ACP is an industry standard** (not GitHub-proprietary)
   - JSON-RPC 2.0 over NDJSON
   - Created by Zed Industries, adopted by GitHub, JetBrains, Gemini, others
   - Copilot CLI support: Public preview (Jan 28, 2026)
   - SDK: @agentclientprotocol/sdk v0.14.x (pre-1.0)

2. **Three Realistic Options for EditLess**
   - **Option A (Current Path):** Terminal + events.jsonl + --resume
     - Low implementation cost ✅
     - Native Copilot UI ✅
     - Limited structured data ⚠️
     - Very low risk ✅
   
   - **Option B (Future Path):** Full ACP Client (no terminal, EditLess owns UI)
     - Very high implementation cost (rebuild Copilot UI from scratch)
     - Custom UX (could be better or worse)
     - Perfect structured data ✅
     - High risk (public preview, pre-1.0 SDK)
   
   - **Option C (Not Recommended):** Hybrid (two processes)
     - Fatal flaw: separate sessions, double API quota, no benefit

3. **Protocol Surface (Live Captured):**
   - Initialize handshake returns: protocolVersion, agentCapabilities, availableModels, authMethods
   - session/new creates conversation; session/prompt sends user message
   - Notifications: agent_message_chunk, tool_call, plan, available_commands_update
   - Agent can request: fs/read_text_file, terminal/create, session/request_permission

### Recommendation
- **Phase 1 (now):** Ship Option A (terminal + events.jsonl + --resume). Stable, proven, low risk.
- **Phase 2 (future, when ACP stabilizes):** Consider Option B ONLY if EditLess becomes full IDE panel (like Zed/JetBrains).
- **Don't pursue:** Pseudoterminal + ACP mixing (mutually exclusive).

### Session 2: ACP Model/Mode Switching Architecture Decision
- **Duration:** ~45m  
- **Output:** Decision document on deferred implementation

### Findings
- UI dropdowns wired in webview panel
- session/new returns availableModels and availableModes
- **Missing:** No dedicated session/changeModel or session/changeMode method in current ACP spec
- Protocol is pre-1.0; new methods may appear in future SDK versions

### Decision
**Log changes, defer implementation.** Model/mode selection is tracked but not sent to CLI. Reduces implementation risk while keeping code ready for protocol updates.

## Documentation Created

1. **ACP Deep Dive Report** (7 sections, 3000+ words)
   - Technical analysis with live protocol captures
   - Three options with trade-off matrices
   - Recommendation for EditLess roadmap

2. **Model/Mode Decision Log** (decision rationale + next steps)
   - Acknowledged missing protocol method
   - Explained deferral strategy
   - Set expectation for future investigation

## Decisions Logged
- 2 inbox files → decisions.md (merged, no duplicates)
- Clear trail for future Phase 3+ architectural decisions
- Research output feeds into v0.2+ roadmap planning

## Impact on Team
- **Morty & team:** Clarifies that Phase 2 (pseudoterminal) is parallel path, not ACP replacement; can proceed with current approach
- **Leadership:** Unblocks Phase 1 completion with confidence (Option A is right call for now)
- **Future planning:** ACP analysis is current as of 2026-02-22; SDK may evolve

## Notes
- All research based on: ACP spec v1, GitHub docs, TypeScript SDK v0.14.x, live testing with Copilot CLI v0.0.414
- Live captures verify actual protocol behavior (initialize, session/new, session/prompt, streaming responses)
- Assessment is time-stamped; recommend re-evaluation when SDK reaches v1.0
