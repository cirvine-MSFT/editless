# Agent 23: Rick (Lead) — 3x Review Pass 1 (Architecture)

**Date:** 2026-02-22T23:12  
**Role:** Lead, Architecture Review  
**Mode:** background  
**Task:** Review PR (#366/#368) for architectural soundness, mock patterns, and test quality

## Outcome: REJECT

### Findings

#### ❌ Test Mock Duplication
- **File:** `src/tree/work-items-tree.test.ts`, `src/tree/prs-tree.test.ts`
- **Issue:** Shared mock objects defined independently in two test files
- **Pattern:** `mockWorkItem()`, `mockPullRequest()` factories duplicated
- **Recommendation:** Extract to shared mock library in `src/__mocks__/`

#### ❌ Missing iconPath Assertions
- **Files:** Multiple tree tests
- **Issue:** Icon resolution not validated in tree node snapshots
- **Impact:** Future icon path regressions undetectable
- **Recommendation:** Add `expect(node.iconPath).toBeDefined()` to all tree construction tests

### Decision Points
- Mock consolidation is a prerequisite for maintainability
- Tree UI tests must validate visual contract (iconPath)

## Follow-up
Pass to **agent-24 (Meeseeks)** for test quality pass.
