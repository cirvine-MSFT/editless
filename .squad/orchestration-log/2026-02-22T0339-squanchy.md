# Squanchy Orchestration ‚Äî 2026-02-22T0339Z

**Agent:** Squanchy (claude-haiku-4.5)  
**Timestamp:** 2026-02-22T03:39:00Z  
**Task:** Analyze Squad CLI/SDK integration architecture

## Mandate

Deep-dive architecture analysis: How should Squad CLI and SDK integrate with EditLess? What's actionable NOW vs blocked?

## Work Done

1. **Identified core design challenge:**
   - Squad CLI/SDK = process orchestration model (event distribution, Ralph monitoring)
   - EditLess = terminal management model (homogeneous agent sessions)
   - Integration requires session modality awareness + event consumption strategy

2. **Designed session modality system:**
   - Proposed enum: `'copilot-standard'`, `'copilot-ceremony'`, `'squad-loop'`, `'squad-watch'`, `'squad-interactive'`, `'unknown'`
   - Modality detected at launch time via env var `SQUAD_MODE` or command parsing
   - Tree display per modality (modal badges: üë§, üîÑ, üëÅÔ∏è, etc.)

3. **Analyzed event consumption strategies:**
   - Option A: Terminal-based polling (limited, not preferred)
   - Option B: SDK direct import (requires SDK real code, version skew risk)
   - Option C: File-based events via `.squad/events-realtime.jsonl` ‚úÖ **RECOMMENDED**
     - Aligns with Squad's file-native architecture
     - No new protocols needed
     - EditLess already has robust watcher infrastructure
     - Can ship without waiting for EventBus to be real
     - When SDK ships real code, swap transport layer; UI unchanged

4. **Phased Ralph integration:**
   - Phase 1: Detect Ralph presence from workspace.yaml; show badge ("üîÑ Ralph monitoring")
   - Phase 2: When SDK ships EventBus, subscribe to `ralph:scan-complete` events
   - Phase 3: Full Ralph dashboard with work item timeline

5. **Quantified effort:**
   - Phase 1 actionable items: ~7 hours, no SDK required
   - Blocked items: 4 issues waiting on Brady's real SDK/CLI code

## Decision Artifact

**File:** `.squad/decisions/inbox/squanchy-squad-integration-architecture.md`

Architecture brief with file references, effort estimates, and phased rollout.

## Key Insight

Don't retrofit Squad into homogeneous TerminalInfo model. Extend it with modality awareness and event subscriptions. File-based events unblock Phase 1 delivery.

## Next Steps

- Squanchy's design ready for Morty/Jaguar implementation
- File-based event schema (`.squad/events-realtime.jsonl`) documented
- When Squad SDK ships real code, swap event transport; reuse same SquadEventWatcher interface
